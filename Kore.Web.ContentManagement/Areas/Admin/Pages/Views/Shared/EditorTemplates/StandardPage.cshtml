@model Kore.Web.ContentManagement.Areas.Admin.Pages.StandardPage

<div id="fields-content" class="col-sm-12 col-md-12">
    <div class="col-sm-12 col-md-12">
        <div class="form-group">
            @Html.Label("MetaKeywords", "Meta Keywords", new { @class = "control-label" })
            @Html.TextBox("MetaKeywords", null, new { @class = "form-control", data_bind = "value: pageType.metaKeywords" })
        </div>
    </div>
    <div class="col-sm-12 col-md-12">
        <div class="form-group">
            @Html.Label("MetaDescription", "Meta Description", new { @class = "control-label" })
            @Html.TextBox("MetaDescription", null, new { @class = "form-control", data_bind = "value: pageType.metaDescription" })
        </div>
    </div>
    <div class="col-sm-12 col-md-12">
        <div class="form-group">
            @Html.Label("BodyContent", "Body Content", new { @class = "control-label" })
            @Html.TextArea("BodyContent", null, new { @class = "form-control", data_bind = "wysiwyg: pageType.bodyContent, wysiwygConfig: tinyMCEConfig" })
        </div>
    </div>
</div>

<script type="text/javascript">
    function updateModel() {
        viewModel.metaKeywords = ko.observable("");
        viewModel.metaDescription = ko.observable("");
        viewModel.bodyContent = ko.observable("");

        var data = ko.mapping.fromJSON(viewModel.fields());

        if (data && data.TestProperty) {
            viewModel.metaKeywords(data.MetaKeywords());
            viewModel.metaDescription(data.MetaDescription());
            viewModel.bodyContent(data.BodyContent());
        }
    };

    function cleanUp() {
        delete viewModel.metaKeywords;
        delete viewModel.metaDescription;
        delete viewModel.bodyContent;
    }

    function onBeforeSave() {
        var data = {
            MetaKeywords: viewModel.metaKeywords(),
            MetaDescription: viewModel.metaDescription(),
            BodyContent: viewModel.bodyContent()
        };

        viewModel.fields(ko.mapping.toJSON(data));
    };
</script>