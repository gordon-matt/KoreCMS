@using Kore.Web
@using Kore.Web.Mvc.KoreUI

@{
    Layout = KoreWebConstants.DefaultAdminLayoutPath;
    
    Style.IncludeBundle("kendo-ui");

    Script.IncludeBundle("kendo-ui");
    Script.IncludeBundle("knockout");
    Script.IncludeBundle("knockout-mapping");
    Script.IncludeBundle("notify");

    Script.IncludeBundle("kore/common");
    Script.IncludeBundle("kore/jqueryval");
    Script.IncludeBundle("kore/section-switching");
    Script.IncludeBundle("kore-web/membership");

    string initialView = ViewBag.InitialView;
}

@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.Users")
@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.EditUser")
@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.EditUserRoles")
@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.ChangePassword")
@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.Roles")
@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.EditRole")
@Html.Partial("Kore.Web.Areas.Admin.Membership.Views.Membership.EditRolePermissions")

@section scripts {
    <script type="text/javascript">
        var gridPageSize = @SiteSettings.DefaultGridPageSize;

        var translations = {
            ChangePasswordError: '@T(KoreWebLocalizableStrings.Membership.ChangePasswordError).Text',
            ChangePasswordSuccess: '@T(KoreWebLocalizableStrings.Membership.ChangePasswordSuccess).Text',
            Create: '@T(KoreWebLocalizableStrings.General.Create).Text',
            Delete: '@T(KoreWebLocalizableStrings.General.Delete).Text',
            DeleteRecordConfirm: '@T(KoreWebLocalizableStrings.General.ConfirmDeleteRecord).Text',
            DeleteRecordError: '@T(KoreWebLocalizableStrings.General.DeleteRecordError).Text',
            DeleteRecordSuccess: '@T(KoreWebLocalizableStrings.General.DeleteRecordSuccess).Text',
            Edit: '@T(KoreWebLocalizableStrings.General.Edit).Text',
            GetRecordError: '@T(KoreWebLocalizableStrings.General.GetRecordError).Text',
            InsertRecordError: '@T(KoreWebLocalizableStrings.General.InsertRecordError).Text',
            InsertRecordSuccess: '@T(KoreWebLocalizableStrings.General.InsertRecordSuccess).Text',
            Password: '@T(KoreWebLocalizableStrings.Membership.Password).Text',
            Permissions: '@T(KoreWebLocalizableStrings.Membership.Permissions).Text',
            Roles: '@T(KoreWebLocalizableStrings.Membership.Roles).Text',
            SavePermissionsError: '@T(KoreWebLocalizableStrings.Membership.SavePermissionsError).Text',
            SavePermissionsSuccess: '@T(KoreWebLocalizableStrings.Membership.SavePermissionsSuccess).Text',
            SaveRolesError: '@T(KoreWebLocalizableStrings.Membership.SaveRolesError).Text',
            SaveRolesSuccess: '@T(KoreWebLocalizableStrings.Membership.SaveRolesSuccess).Text',
            UpdateRecordError: '@T(KoreWebLocalizableStrings.General.UpdateRecordError).Text',
            UpdateRecordSuccess: '@T(KoreWebLocalizableStrings.General.UpdateRecordSuccess).Text',

            Columns: {
                User: {
                    IsActive: '@T(KoreWebLocalizableStrings.Membership.UserModel.IsActive).Text',
                    Roles: '@T(KoreWebLocalizableStrings.Membership.UserModel.Roles).Text',
                    UserName: '@T(KoreWebLocalizableStrings.Membership.UserModel.UserName).Text',
                },
                Role: {
                    Name: '@T(KoreWebLocalizableStrings.Membership.RoleModel.Name).Text',
                },
                Permission: {
                    Category: '@T(KoreWebLocalizableStrings.Membership.PermissionModel.Category).Text',
                    Name: '@T(KoreWebLocalizableStrings.Membership.PermissionModel.Name).Text',
                }
            }
        }

        currentSection = $("#users-grid-section");

        @if (initialView == "Role")
        {
            @:switchSection($("#roles-grid-section"));
        }
    </script>
}
